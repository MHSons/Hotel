<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Patients | AlphaMed</title><style>body{font-family:Arial,Helvetica,sans-serif;margin:0;background:linear-gradient(135deg,#1e3a8a,#2563eb);min-height:100vh} .container{max-width:1000px;margin:40px auto;background:#fff;padding:25px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.2)} table{width:100%;border-collapse:collapse} th,td{padding:10px;border-bottom:1px solid #eee} th{background:#f3f4f6;color:#1e3a8a} button{background:#2563eb;color:#fff;border:none;padding:6px 10px;border-radius:6px;cursor:pointer} .btn-del{background:#ef4444} .back{text-align:center;margin-top:20px;display:block;color:#2563eb;text-decoration:none}</style></head><body><div class="container"><h2 style="text-align:center;color:#1e3a8a">Patient Records</h2><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px"><input id="searchBox" placeholder="Search by name, code or mobile" style="padding:8px;border-radius:6px;border:1px solid #ccc;width:320px"><button onclick="window.location='add-patient.html'">+ Add Patient</button></div><table><thead><tr><th>Code</th><th>Name</th><th>Age</th><th>Gender</th><th>Mobile</th><th>Dept</th><th>Date</th><th>Actions</th></tr></thead><tbody id="patientsTbody"></tbody></table><a class="back" href="dashboard.html">‚Üê Back to Dashboard</a></div><script>const user=JSON.parse(localStorage.getItem('loggedUser')||'null'); if(!user){alert('Please login');window.location='index.html'} function renderPatients(){ const tbody=document.getElementById('patientsTbody'); tbody.innerHTML=''; const patients=JSON.parse(localStorage.getItem('patients')||'[]'); const q=(document.getElementById('searchBox').value||'').toLowerCase().trim(); const filtered=patients.filter(p=>!q||p.full_name.toLowerCase().includes(q)||p.patient_code.toLowerCase().includes(q)|| (p.mobile||'').toLowerCase().includes(q)); if(filtered.length===0){ tbody.innerHTML='<tr><td colspan="8">No patients found</td></tr>'; return } filtered.reverse().forEach(p=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${p.patient_code}</td><td>${p.full_name}</td><td>${p.age}</td><td>${p.gender}</td><td>${p.mobile||''}</td><td>${p.department||''}</td><td>${p.collected_at?new Date(p.collected_at).toLocaleDateString():''}</td><td><button onclick="openResult('${p.patient_code}')">Add Result</button> <button class="btn-del" onclick="deletePatient('${p.patient_code}')">Delete</button></td>`; tbody.appendChild(tr); }); } function openResult(code){ localStorage.setItem('selectedPatient',code); window.location='add-result.html' } function deletePatient(code){ if(!confirm('Delete?')) return; let patients=JSON.parse(localStorage.getItem('patients')||'[]'); patients=patients.filter(p=>p.patient_code!==code); localStorage.setItem('patients',JSON.stringify(patients)); const logs=JSON.parse(localStorage.getItem('activityLog')||'[]'); logs.push({time:new Date(),text:'Deleted patient '+code}); localStorage.setItem('activityLog',JSON.stringify(logs)); renderPatients() } renderPatients();</script><script src="app.js"></script></body></html>
